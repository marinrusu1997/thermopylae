<h1 align="center">@thermopylae/core.adapter.fastify</h1>
<p>
  <img alt="Version" src="https://img.shields.io/badge/version-0.0.1-blue.svg?cacheSeconds=2592000" />
  <img alt="Node Version" src="https://img.shields.io/badge/node-%3E%3D16-blue.svg"/>
<a href="https://marinrusu1997.github.io/thermopylae/core.adapter.fastify/index.html" target="_blank">
  <img alt="Documentation" src="https://img.shields.io/badge/documentation-yes-brightgreen.svg" />
</a>
<a href="https://github.com/marinrusu1997/thermopylae/blob/master/LICENSE" target="_blank">
  <img alt="License: ISC" src="https://img.shields.io/badge/License-MIT-yellow.svg" />
</a>
</p>

> Fastify adapter for Thermopylae framework.

## Install

```sh
npm install @thermopylae/core.adapter.fastify
```

## Description
> :information_source: **TL;DR;** <br/>
> Thermopylae framework allows you to use it's *core.** modules with any of the existing web frameworks,
> such as [express][express-link], [fastify][fastify-link] etc. <br/>
> All you need to do is implementing [HttpRequest][core-declarations-http-request-link] and [HttpResponse][core-declarations-http-response-link]
> interfaces from [@thermopylae/core.declarations][core-declarations-link].

This package contains implementations for *HttpRequest* and *HttpResponse* from [@thermopylae/core.declarations][core-declarations-link]. <br/>
These implementations are wrappers over Fastify request and response objects.

## Usage
Bellow is a simple example of how this package can be used:

```typescript
import { FastifyRequestAdapter, FastifyResponseAdapter, LOCATION_SYM } from '@thermopylae/core.adapter.fastify';
import { HttpStatusCode } from '@thermopylae/core.declarations';
import type { FastifyRequest, FastifyReply } from 'fastify';

function handler(req: FastifyRequest, res: FastifyReply) {
    const request = new FastifyRequestAdapter(req);
    const response = new FastifyResponseAdapter(res);

    // location needs to be computed by yourself and attached to Fastify request object, 
    // before passing it to Thermopylae functions
    request.raw[LOCATION_SYM] = {
        countryCode: 'MD',
        regionCode: 'K',
        city: 'Chisinau',
        latitude: null,
        longitude: null,
        timezone: null
    };
    
    console.log('New request received from ip ', request.ip, ' and device ', JSON.stringify(request.device));
    
    response.status(HttpStatusCode.Ok).send('Hello World!');
}

```

## API Reference
API documentation is available [here][api-doc-link].

It can also be generated by issuing the following commands:
```shell
git clone git@github.com:marinrusu1997/thermopylae.git
cd thermopylae
yarn install
yarn workspace @thermopylae/core.adapter.fastify run doc
```

## Author

üë§ **Rusu Marin**

* GitHub: [@marinrusu1997](https://github.com/marinrusu1997)
* Email: [dimarusu2000@gmail.com](mailto:dimarusu2000@gmail.com)
* LinkedIn: [@marinrusu1997](https://linkedin.com/in/marinrusu1997)

## üìù License

Copyright ¬© 2021 [Rusu Marin](https://github.com/marinrusu1997). <br/>
This project is [MIT](https://github.com/marinrusu1997/thermopylae/blob/master/LICENSE) licensed.

[api-doc-link]: https://marinrusu1997.github.io/thermopylae/core.adapter.fastify/index.html
[core-declarations-link]: https://marinrusu1997.github.io/thermopylae/core.declarations/index.html
[express-link]: https://expressjs.com/
[fastify-link]: https://www.fastify.io/
[core-declarations-http-request-link]: https://marinrusu1997.github.io/thermopylae/core.declarations/interfaces/http_request.httprequest.html
[core-declarations-http-response-link]: https://marinrusu1997.github.io/thermopylae/core.declarations/interfaces/http_response.httpresponse.html

