<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@thermopylae/lib.pool</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<ul class="results-priority" style="display:none">
					</ul>
					<a href="index.html" class="title">@thermopylae/lib.pool</a>
					&emsp;<a href="https://github.com/marinrusu1997/thermopylae/tree/master/packages/lib.pool" class="title">Github</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
			</ul>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-3 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation outline primary">
				<a style="margin-left:0em" href="modules.html">Modules</a>
				<ul style="display:none">
					{&quot;Error&quot;:&quot;error&quot;,&quot;Object Pools&quot;:{&quot;Array Implementation&quot;:&quot;pools_array_object_pool&quot;,&quot;DLL Implementation&quot;:&quot;pools_dll_object_pool&quot;}}
				</ul>
			</nav>
		</div>
		<div class="col-7 offset-3 col-content">
			<h1>@thermopylae/lib.pool</h1>
			<div class="tsd-panel tsd-typography">
				<h1 align="center">@thermopylae/lib.pool</h1>
				<p>
					<img alt="Version" src="https://img.shields.io/badge/version-0.0.1-blue.svg?cacheSeconds=2592000" />
					<img alt="Node Version" src="https://img.shields.io/badge/node-%3E%3D16-blue.svg"/>
					<a href="https://marinrusu1997.github.io/thermopylae/lib.pool/index.html" target="_blank">
						<img alt="Documentation" src="https://img.shields.io/badge/documentation-yes-brightgreen.svg" />
					</a>
					<a href="https://github.com/marinrusu1997/thermopylae/blob/master/LICENSE" target="_blank">
						<img alt="License: MIT" src="https://img.shields.io/badge/License-MIT-yellow.svg" />
					</a>
				</p>
				<blockquote>
					<p>Resources pool.</p>
				</blockquote>
				<a href="#install" id="install" style="color: inherit; text-decoration: none;">
					<h2>Install</h2>
				</a>
				<pre><code class="language-sh"><span style="color: #000000">npm install @thermopylae/lib.pool</span>
</code></pre>
				<a href="#description" id="description" style="color: inherit; text-decoration: none;">
					<h2>Description</h2>
				</a>
				<p>This package contains a set of pools for resource management:</p>
				<ul>
					<li><a href="https://marinrusu1997.github.io/thermopylae/lib.pool/modules/pools_array_object_pool.html">Array Object Pool</a> - a pool which manages object resources.
						Internal implementation uses a single array to keep used and free objects.
					All operations are constant, while memory footprint is low.</li>
					<li><a href="https://marinrusu1997.github.io/thermopylae/lib.pool/modules/pools_dll_object_pool.html">DLL Object Pool</a> - a pool which manages object resources.
						Internal implementation uses two doubly linked lists to keep used and free objects.
					All operations are constant, while memory footprint is higher than the one of <a href="https://marinrusu1997.github.io/thermopylae/lib.pool/modules/pools_array_object_pool.html">Array Object Pool</a>.</li>
				</ul>
				<p>The &#39;go-to&#39; option is <a href="https://marinrusu1997.github.io/thermopylae/lib.pool/modules/pools_array_object_pool.html">Array Object Pool</a>. </p>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<p><strong>ArrayObjectPool</strong>:</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">ArrayObjectPool</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@thermopylae/lib.pool&#039;</span><span style="color: #000000">;</span>

<span style="color: #008000">/* Create a static pool */</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">pool</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">ArrayObjectPool</span><span style="color: #000000">({</span>
<span style="color: #000000">    </span><span style="color: #008000">// if you ommit capacity, pool will grow as you use it</span>
<span style="color: #000000">    </span><span style="color: #001080">capacity:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #795E26">initializer</span><span style="color: #000000">(</span><span style="color: #001080">cacheEntry</span><span style="color: #000000">, </span><span style="color: #001080">args</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">[</span><span style="color: #A31515">&#039;key&#039;</span><span style="color: #000000">] = </span><span style="color: #001080">args</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">];</span>
<span style="color: #000000">        </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">[</span><span style="color: #A31515">&#039;value&#039;</span><span style="color: #000000">] = </span><span style="color: #001080">args</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">];</span>
<span style="color: #000000">        </span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">;</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #795E26">deInitializer</span><span style="color: #000000">(</span><span style="color: #001080">cacheEntry</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #008000">// GC can collect the values now</span>
<span style="color: #000000">        </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">[</span><span style="color: #A31515">&#039;key&#039;</span><span style="color: #000000">] = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span>
<span style="color: #000000">        </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">[</span><span style="color: #A31515">&#039;value&#039;</span><span style="color: #000000">] = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span>
<span style="color: #000000">        </span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">;</span>
<span style="color: #000000">    } </span>
<span style="color: #000000">});</span>

<span style="color: #008000">/* Acquire resource */</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">resourceHandle</span><span style="color: #000000"> = </span><span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">acquire</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;key1&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;value1&#039;</span><span style="color: #000000">);</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">resourceHandle</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">); </span><span style="color: #008000">// { key: &#039;key1&#039;, value: &#039;value1&#039; }</span>

<span style="color: #AF00DB">try</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">acquire</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;key1&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;value1&#039;</span><span style="color: #000000">);</span>
<span style="color: #000000">} </span><span style="color: #AF00DB">catch</span><span style="color: #000000"> (</span><span style="color: #001080">e</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">);</span>
<span style="color: #000000">}</span>

<span style="color: #008000">/* Release resource */</span>
<span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">release</span><span style="color: #000000">(</span><span style="color: #001080">resourceHandle</span><span style="color: #000000">);</span>

<span style="color: #008000">/* Release all resources */</span>
<span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">acquire</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;key1&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;value1&#039;</span><span style="color: #000000">);</span>
<span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">releaseAll</span><span style="color: #000000">(); </span><span style="color: #008000">// after releasing all resources, you can acquire them again</span>

<span style="color: #008000">/* Clear pool */</span>
<span style="color: #008000">// it&#039;s RECOMMENDED to release resources before calling clear, </span>
<span style="color: #008000">// as this method won&#039;t call object destructors</span>
<span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">clear</span><span style="color: #000000">(); </span><span style="color: #008000">// after this operation pool should no longer be used</span>
</code></pre>
				<p><strong>DLLObjectPool</strong>:</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">DLLObjectPool</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@thermopylae/lib.pool&#039;</span><span style="color: #000000">;</span>

<span style="color: #008000">/* Create pool */</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">pool</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">DLLObjectPool</span><span style="color: #000000">({</span>
<span style="color: #000000">    </span><span style="color: #001080">capacity:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">,</span>
<span style="color: #000000">    </span><span style="color: #795E26">constructor</span><span style="color: #000000">(</span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">, </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> { </span><span style="color: #001080">key</span><span style="color: #000000">, </span><span style="color: #001080">value</span><span style="color: #000000"> };</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #795E26">initializer</span><span style="color: #000000">(</span><span style="color: #001080">cacheEntry</span><span style="color: #000000">: </span><span style="color: #267F99">object</span><span style="color: #000000">, </span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">, </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">.</span><span style="color: #001080">key</span><span style="color: #000000"> = </span><span style="color: #001080">key</span><span style="color: #000000">;</span>
<span style="color: #000000">        </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> = </span><span style="color: #001080">value</span><span style="color: #000000">;</span>
<span style="color: #000000">        </span>
<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">;</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #795E26">destructor</span><span style="color: #000000">(</span><span style="color: #001080">cacheEntry</span><span style="color: #000000">: </span><span style="color: #267F99">object</span><span style="color: #000000">) {</span>
<span style="color: #000000">        </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">.</span><span style="color: #001080">key</span><span style="color: #000000"> = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span>
<span style="color: #000000">        </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span>

<span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">cacheEntry</span><span style="color: #000000">;</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">});</span>

<span style="color: #008000">/* Use pool */</span>
<span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">resourceHandle</span><span style="color: #000000"> = </span><span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">acquire</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;key1&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;value1&#039;</span><span style="color: #000000">);</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">resourceHandle</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">); </span><span style="color: #008000">// { key: &#039;key1&#039;, value: &#039;value1&#039; }</span>

<span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">releaseHandle</span><span style="color: #000000">(</span><span style="color: #001080">resourceHandle</span><span style="color: #000000">);</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">resourceHandle</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">); </span><span style="color: #008000">// { key: undefined, value: undefined }</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">cacheEntry</span><span style="color: #000000"> = { </span><span style="color: #001080">key:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;key&#039;</span><span style="color: #000000">, </span><span style="color: #001080">value:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;value&#039;</span><span style="color: #000000"> };</span>
<span style="color: #001080">resourceHandle</span><span style="color: #000000"> = </span><span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">preempt</span><span style="color: #000000">(</span><span style="color: #001080">cacheEntry</span><span style="color: #000000">);</span>
<span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">resourceHandle</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">); </span><span style="color: #008000">// { key: &#039;key&#039;, value: &#039;value&#039; }</span>

<span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">releaseObject</span><span style="color: #000000">(</span><span style="color: #001080">cacheEntry</span><span style="color: #000000">); </span><span style="color: #008000">// works slower, has O(n) complexity</span>

<span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">acquire</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;key&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;value&#039;</span><span style="color: #000000">);</span>
<span style="color: #001080">pool</span><span style="color: #000000">.</span><span style="color: #795E26">releaseAll</span><span style="color: #000000">(); </span><span style="color: #008000">// after release all, objects can be acquired again</span>
</code></pre>
				<a href="#api-reference" id="api-reference" style="color: inherit; text-decoration: none;">
					<h2>API Reference</h2>
				</a>
				<p>API documentation is available <a href="https://marinrusu1997.github.io/thermopylae/lib.pool/index.html">here</a>.</p>
				<p>It can also be generated by issuing the following commands:</p>
				<pre><code class="language-shell"><span style="color: #000000">git clone git@github.com:marinrusu1997/thermopylae.git</span>
<span style="color: #795E26">cd</span><span style="color: #000000"> thermopylae</span>
<span style="color: #000000">yarn install</span>
<span style="color: #000000">yarn workspace @thermopylae/lib.pool run doc</span>
</code></pre>
				<a href="#author" id="author" style="color: inherit; text-decoration: none;">
					<h2>Author</h2>
				</a>
				<p>👤 <strong>Rusu Marin</strong></p>
				<ul>
					<li>GitHub: <a href="https://github.com/marinrusu1997">@marinrusu1997</a></li>
					<li>Email: <a href="mailto:dimarusu2000@gmail.com">dimarusu2000@gmail.com</a></li>
					<li>LinkedIn: <a href="https://www.linkedin.com/in/rusu-marin-1638b0156/">@marinrusu1997</a></li>
				</ul>
				<a href="#📝-license" id="📝-license" style="color: inherit; text-decoration: none;">
					<h2>📝 License</h2>
				</a>
				<p>Copyright © 2021 <a href="https://github.com/marinrusu1997">Rusu Marin</a>. <br/>
				This project is <a href="https://github.com/marinrusu1997/thermopylae/blob/master/LICENSE">MIT</a> licensed.</p>
			</div>
			<!--{&quot;options&quot;:&quot;/home/marin/secondary-hard-drive/node-projects/framework/packages/lib.pool&quot;,&quot;tsconfig&quot;:&quot;/home/marin/secondary-hard-drive/node-projects/framework/packages/lib.pool&quot;,&quot;entryPoints&quot;:[&quot;lib/&quot;],&quot;exclude&quot;:[&quot;test/**/*&quot;,&quot;lib/index.ts&quot;],&quot;externalPattern&quot;:[&quot;**/node_modules/**&quot;],&quot;excludeExternals&quot;:true,&quot;excludeNotDocumented&quot;:false,&quot;excludeInternal&quot;:false,&quot;excludePrivate&quot;:true,&quot;excludeProtected&quot;:true,&quot;disableSources&quot;:true,&quot;disableAliases&quot;:false,&quot;includes&quot;:&quot;&quot;,&quot;media&quot;:&quot;&quot;,&quot;watch&quot;:false,&quot;preserveWatchOutput&quot;:false,&quot;emit&quot;:false,&quot;out&quot;:&quot;doc/html&quot;,&quot;json&quot;:&quot;doc/json/index.json&quot;,&quot;pretty&quot;:true,&quot;theme&quot;:&quot;/home/marin/secondary-hard-drive/node-projects/framework/node_modules/typedoc-neo-theme/bin/default&quot;,&quot;highlightTheme&quot;:&quot;light-plus&quot;,&quot;name&quot;:&quot;&quot;,&quot;includeVersion&quot;:false,&quot;excludeTags&quot;:[],&quot;readme&quot;:&quot;README.md&quot;,&quot;defaultCategory&quot;:&quot;Other&quot;,&quot;categoryOrder&quot;:[],&quot;categorizeByGroup&quot;:true,&quot;gitRevision&quot;:&quot;&quot;,&quot;gitRemote&quot;:&quot;origin&quot;,&quot;gaID&quot;:&quot;&quot;,&quot;gaSite&quot;:&quot;auto&quot;,&quot;hideGenerator&quot;:true,&quot;toc&quot;:[],&quot;disableOutputCheck&quot;:false,&quot;help&quot;:false,&quot;version&quot;:false,&quot;showConfig&quot;:false,&quot;plugin&quot;:[&quot;typedoc-neo-theme&quot;],&quot;logger&quot;:&quot;console&quot;,&quot;logLevel&quot;:1,&quot;listInvalidSymbolLinks&quot;:true,&quot;links&quot;:[{&quot;label&quot;:&quot;Github&quot;,&quot;url&quot;:&quot;https://github.com/marinrusu1997/thermopylae/tree/master/packages/lib.pool&quot;}],&quot;outline&quot;:[{&quot;Error&quot;:&quot;error&quot;,&quot;Object Pools&quot;:{&quot;Array Implementation&quot;:&quot;pools_array_object_pool&quot;,&quot;DLL Implementation&quot;:&quot;pools_dll_object_pool&quot;}}]}-->
		</div>
		<div class="col-2 col-menu secondary-menu">
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer>
</footer>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>